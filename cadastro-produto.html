<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EstoquEr√© | Cadastro de Produto</title>
    <!-- Carregamento do Tailwind CSS para estilo -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- QuaggaJS CDN para leitura de c√≥digo de barras -->
    <script src="https://unpkg.com/quagga@0.12.1/dist/quagga.min.js"></script>
    <!-- Link para o arquivo de estilos externo -->
    <link rel="stylesheet" href="style.css"> 
</head>
<body class="min-h-screen flex flex-col">

    <!-- Navbar com link de volta -->
    <header class="fixed top-0 left-0 w-full bg-indigo-700 shadow-lg z-10">
        <nav class="container mx-auto px-4 h-16 flex items-center justify-between">
            <h1 class="text-2xl font-bold text-white">Cadastro de Produto</h1>
            <a href="index.html" class="text-white hover:text-indigo-200 transition duration-150 flex items-center">
                <span class="mr-1">&larr;</span> Voltar ao Menu
            </a>
        </nav>
    </header>

    <main class="flex-grow main-container mt-20 p-8 bg-white rounded-xl shadow-xl">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">Informa√ß√µes do Novo Item</h2>
        
        <!-- Se√ß√£o do Scanner -->
        <div id="scanner-container" class="mb-6 rounded-xl overflow-hidden shadow-lg border border-gray-200">
            <div id="interactive" class="viewport h-56 bg-gray-800 relative">
                <!-- O feed de v√≠deo da c√¢mera aparecer√° aqui (QuaggaJS) -->
            </div>
            <p id="barcode-result" class="text-center p-3 font-medium bg-gray-100 text-gray-700">Pronto para iniciar o scanner.</p>
        </div>
        
        <form id="cadastroForm" class="space-y-6">

            <!-- Campo C√≥digo de Barras -->
            <div>
                <label for="codigoBarras" class="block text-sm font-medium text-gray-700 mb-1">C√≥digo de Barras (Escaneado ou Manual)</label>
                <input type="text" id="codigoBarras" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 shadow-sm font-mono" placeholder="Escaneie ou digite o c√≥digo">
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- Campo Marca -->
                <div>
                    <label for="marca" class="block text-sm font-medium text-gray-700 mb-1">Marca</label>
                    <input type="text" id="marca" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 shadow-sm" placeholder="Ex: Nike, Samsung">
                </div>
                <!-- Campo Descri√ß√£o do Produto -->
                <div>
                    <label for="productDescription" class="block text-sm font-medium text-gray-700 mb-1">Descri√ß√£o do Produto</label>
                    <input type="text" id="productDescription" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 shadow-sm" placeholder="Ex: Camiseta B√°sica P">
                </div>
            </div>

            <!-- Se√ß√£o de Pre√ßos e Margem -->
            <h3 class="text-xl font-semibold text-gray-700 pt-4 border-t mt-4">Gest√£o de Pre√ßo</h3>
            
            <div class="grid grid-cols-3 gap-4 items-end">
                <!-- Custo (Pre√ßo da Compra) - ID: custoInput (ATUALIZADO) -->
                <div>
                    <label for="custoInput" class="block text-sm font-medium text-gray-700 mb-1">Custo (R$)</label>
                    <input type="number" id="custoInput" step="0.01" value="0.00" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500 shadow-sm text-red-600 font-bold" placeholder="Pre√ßo de Compra">
                </div>
                <!-- Margem (%) - ID: margemInput (ATUALIZADO) -->
                <div>
                    <label for="margemInput" class="block text-sm font-medium text-gray-700 mb-1">Margem (%)</label>
                    <input type="number" id="margemInput" value="30" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 shadow-sm font-bold" placeholder="Margem desejada">
                </div>
                <!-- Pre√ßo de Venda (Calculado) - ID: precoVendaInput (ATUALIZADO) -->
                <div>
                    <label for="precoVendaInput" class="block text-sm font-medium text-gray-700 mb-1">Pre√ßo de Venda (R$)</label>
                    <input type="text" id="precoVendaInput" readonly value="0.00" class="w-full p-3 border border-gray-300 rounded-lg shadow-inner bg-green-100 text-green-700 font-extrabold" title="Calculado automaticamente">
                </div>
            </div>

            <!-- Campo Quantidade Inicial -->
            <div>
                <label for="productQuantity" class="block text-sm font-medium text-gray-700 mb-1">Quantidade Inicial em Estoque</label>
                <input type="number" id="productQuantity" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 shadow-sm" placeholder="Ex: 50">
            </div>

            <!-- Bot√£o de Cadastro -->
            <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-lg transition duration-200 shadow-md">
                üì¶ Salvar Item no Estoque
            </button>
        </form>

        <div id="messageBox" class="mt-4 p-4 rounded-lg text-center hidden"></div>
    </main>
    
    <!-- Rodap√© Simples -->
    <footer class="bg-gray-800 text-white py-4 mt-auto">
        <div class="container mx-auto text-center text-sm">
            &copy; 2025 EstoquEr√©. Todos os direitos reservados.
        </div>
    </footer>

    <!-- Chamadas de scripts -->
    <script type="module" src="firebase-config.js"></script>
    <script type="module" src="script.js"></script>
</body>
</html>
